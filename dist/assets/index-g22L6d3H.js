import{R as e,j as a,r as s}from"./index-DGhEqDkt.js";import"./wharfkit-core-BkQ8BilC.js";import"./utils-DW7bVyUt.js";import"./react-vendor-BLTrkT9p.js";import"./wharfkit-wallets-DzpnuXri.js";const i=({bee:s,isStaked:i,hiveId:t,onFeed:l,onUnstake:n,onStake:d,getEarningRates:r})=>{const[c,m]=e.useState([0,0,0,0]),[h,o]=e.useState(!1);return e.useEffect(()=>{(async()=>{if(r&&s.immutable_data.Type&&s.immutable_data.Rarity){o(!0);try{const e=await r(s.immutable_data.Type?.toLowerCase()||"",s.immutable_data.Rarity?.toLowerCase()||"");m(e)}catch(e){}finally{o(!1)}}})()},[r,s.immutable_data.Type,s.immutable_data.Rarity]),a.jsx("div",{className:"bee-card "+(i?"":"unstaked"),children:a.jsxs("div",{className:"bee-card-content",children:[a.jsx("div",{className:"bee-actions-dropdown",children:i?a.jsxs("select",{className:"bee-action-select",onChange:e=>{const a=e.target.value;"feed"===a&&l?l(s.asset_id):"unstake"===a&&n&&t&&n(t,s.asset_id),e.target.value=""},defaultValue:"",children:[a.jsx("option",{value:"",disabled:!0,children:"⚙️"}),a.jsx("option",{value:"feed",children:"🍯 Feed"}),a.jsx("option",{value:"unstake",children:"📤 Unstake"})]}):a.jsx("button",{className:"stake-btn",onClick:()=>d&&t&&d(t,s.asset_id),title:"Stake this bee",children:"📥"})}),a.jsx("div",{className:"bee-image-container",children:s.immutable_data?.img?a.jsx("img",{src:s.immutable_data.img.startsWith("http")?s.immutable_data.img:`https://ipfs.io/ipfs/${s.immutable_data.img}`,alt:s.immutable_data.name||`Bee #${s.asset_id}`,className:"bee-image",onError:e=>{e.currentTarget.style.display="none"}}):a.jsx("div",{className:"bee-placeholder",children:"🐝"})}),a.jsxs("div",{className:"bee-info",children:[a.jsx("div",{className:"bee-name",children:s.immutable_data.name||`Bee #${s.asset_id}`}),a.jsx("div",{className:"bee-rarity",children:a.jsxs("span",{children:["⭐ ",s.immutable_data.Rarity||"common"]})}),r&&a.jsx("div",{className:"earning-rates",children:h?a.jsx("span",{className:"loading-rates",children:"Loading rates..."}):a.jsxs("div",{className:"rates-grid",children:[a.jsxs("span",{className:"rate-item",title:"Honey per hour",children:["🍯 ",c[0].toFixed(4),"/h"]}),a.jsxs("span",{className:"rate-item",title:"Pollen per hour",children:["🌸 ",c[1].toFixed(4),"/h"]}),a.jsxs("span",{className:"rate-item",title:"Beeswax per hour",children:["🕯️ ",c[2].toFixed(4),"/h"]}),a.jsxs("span",{className:"rate-item",title:"Royal Jelly per hour",children:["👑 ",c[3].toFixed(4),"/h"]})]})}),a.jsxs("div",{className:"bee-stats",children:[i&&void 0!==s.mutable_data.Hunger&&a.jsxs("div",{className:"hunger-section",children:[a.jsxs("div",{className:"hunger-info",children:[a.jsx("div",{className:"hunger-left",children:a.jsx("span",{className:"hunger-label",children:"🍽️ Hunger"})}),a.jsxs("span",{className:"hunger-value",children:[s.mutable_data.Hunger,"/100"]})]}),a.jsx("div",{className:"hunger-bar",children:a.jsx("div",{className:"hunger-fill",style:{width:`${Math.max(0,Math.min(100,Number(s.mutable_data.Hunger)))}%`}})})]}),!i&&a.jsx("div",{className:"unstaked-status",children:a.jsx("span",{className:"status-badge",children:"📦 In Wallet"})})]})]})]})})},t=({hive:e,hiveBees:t,unstakedBees:l,hivevars:n,onClaimResources:d,onFeedBee:r,onUnstakeBee:c,onUnstakeHive:m,onStakeBee:h,onUpgradeHive:o,getEarningRates:v})=>{const u=Math.max((e.max_slots||5)-4,1),x=e.asset_details?.immutable_data?.rarity||e.asset_details?.immutable_data?.Rarity;let j=Math.min(u-1,4);if(x){j={common:0,uncommon:1,rare:2,epic:3,legendary:4}[x.toLowerCase()]??j}const b=n?.find(e=>"health"===e.category),N=b?.values?.[j]||1e3,g=["Common","Uncommon","Rare","Epic","Legendary"][j]||"Unknown",[p,_]=s.useState(!1);return a.jsxs("div",{className:"hive-card",children:[a.jsxs("div",{className:"hive-header",children:[a.jsx("h3",{children:e.asset_details?.immutable_data?.name||`Hive #${e.hive_id}`}),a.jsxs("div",{className:"hive-actions",children:[a.jsx("button",{className:"claim-btn",onClick:()=>d(e.hive_id),children:"💰 Claim Resources"}),a.jsxs("div",{className:"dropdown-container",children:[a.jsx("button",{className:"dropdown-toggle",onClick:()=>_(!p),children:"⚙️ Actions ▼"}),p&&a.jsxs("div",{className:"dropdown-menu",children:[a.jsx("button",{className:"dropdown-item upgrade-item",onClick:()=>{o(e.hive_id),_(!1)},children:"⬆️ Upgrade Hive"}),a.jsx("button",{className:"dropdown-item unstake-item",onClick:()=>{m(e.hive_id),_(!1)},children:"📤 Unstake Hive"})]})]})]})]}),a.jsxs("div",{className:"hive-main-content",children:[a.jsx("div",{className:"hive-image-container",children:e.asset_details?.immutable_data?.img?a.jsx("img",{src:e.asset_details.immutable_data.img.startsWith("http")?e.asset_details.immutable_data.img:`https://ipfs.neftyblocks.io/ipfs/${e.asset_details.immutable_data.img}`,alt:e.asset_details.immutable_data.name||`Hive #${e.hive_id}`,className:"hive-image",onError:e=>{e.currentTarget.style.display="none"}}):a.jsx("div",{className:"hive-placeholder",children:"🏠"})}),a.jsxs("div",{className:"hive-stats",children:[a.jsxs("div",{className:"health-section",children:[a.jsxs("div",{className:"health-label",children:[a.jsx("span",{className:"health-icon",children:"❤️"}),a.jsxs("span",{children:["Health (",g,")"]}),a.jsxs("span",{className:"health-value",children:[e.health||0,"/",N]})]}),a.jsx("div",{className:"health-bar",children:a.jsx("div",{className:"health-fill",style:{width:`${Math.min((e.health||0)/N*100,100)}%`}})})]}),a.jsx("div",{className:"slots-section",children:a.jsxs("div",{className:"slots-label",children:[a.jsx("span",{className:"slots-icon",children:"🏠"}),a.jsxs("span",{children:["Level ",u]}),a.jsxs("span",{className:"slots-value",children:[e.availableSlots||0,"/",e.max_slots||0]})]})})]})]}),a.jsxs("div",{className:"bees-section",children:[a.jsxs("h4",{children:["🐝 Staked Bees (",t.length,")"]}),t.length>0?a.jsx("div",{className:"bees-grid",children:t.map((s,t)=>a.jsx(i,{bee:s,isStaked:!0,hiveId:e.hive_id,onFeed:r,onUnstake:c,getEarningRates:v},t))}):a.jsx("div",{className:"no-bees",children:"No bees staked in this hive"}),(e.availableSlots||0)>0&&l.length>0&&a.jsxs("div",{className:"unstaked-bees-section",children:[a.jsxs("h5",{children:["🐝 Available Bees to Stake (",l.length,")"]}),a.jsx("div",{className:"bees-grid",children:l.map((s,t)=>a.jsx(i,{bee:s,isStaked:!1,hiveId:e.hive_id,onStake:h,getEarningRates:v},t))})]})]})]})};export{t as default};
